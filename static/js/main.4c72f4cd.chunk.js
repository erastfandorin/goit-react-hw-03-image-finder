(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={overlay:"Modal_overlay__2uyKJ",modal:"Modal_modal__jU3J-"}},12:function(e,t,a){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__1ArHQ",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__aKvJk"}},13:function(e,t,a){e.exports={app:"App_app__3_plp",loader:"App_loader__groK5"}},17:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__3kb9v"}},18:function(e,t,a){e.exports={button:"Button_button__Lj1Di"}},19:function(e,t,a){e.exports=a(47)},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(15),o=a.n(c),s=a(7),i=a.n(s),l=a(9),m=a(10),u=a(2),h=a(3),p=a(5),g=a(4),f=a(6),b=a(16),d=a.n(b),y=a(8),v=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(g.a)(t).call(this))).handlChange=function(t){var a=t.target;e.setState({query:a.value})},e.handlSubmit=function(t){t.preventDefault(),e.props.serviceSearchImages(e.state.query)},e.state={query:""},e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state.query;return n.a.createElement("header",{className:y.searchbar},n.a.createElement("form",{className:y.searchForm,onSubmit:this.handlSubmit},n.a.createElement("button",{type:"submit",className:y.searchFormButton},n.a.createElement("span",{className:y.searchFormButtonLabel},"Search")),n.a.createElement("input",{className:y.searchFormInput,type:"text",autoComplete:"off",placeholder:"Search images and photos",value:e,onChange:this.handlChange})))}}]),t}(r.Component),_=a(17),I=a(11),j=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(c)))).beckdropRef=Object(r.createRef)(),a.handleKeyPress=function(e){"Escape"===e.code&&a.props.onClose()},a.handleBeckdrop=function(e){var t=a.beckdropRef.current;t&&e.target!==t||a.props.onClose()},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this.props.largeImage;return n.a.createElement("div",{className:I.overlay,ref:this.beckdropRef,onClick:this.handleBeckdrop,onKeyPress:this.handleKeyPress,role:"presentation"},n.a.createElement("img",{className:I.modal,src:e,alt:e}))}}]),t}(r.Component),E=a(12),k=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(g.a)(t).call(this))).onImageEnlarge=function(){e.setState({modal:!0})},e.onClose=function(){e.setState({modal:!1})},e.state={modal:!1},e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.image,t=this.state.modal;return n.a.createElement(n.a.Fragment,null,t?n.a.createElement(j,{largeImage:e.largeImageURL,onClose:this.onClose}):n.a.createElement("li",{className:E.imageGalleryItem},n.a.createElement("img",{src:e.webformatURL,alt:e.webformatURL,className:E.imageGalleryItemImage,onClick:this.onImageEnlarge,onKeyPress:this.onImageEnlarge,role:"presentation"})))}}]),t}(r.Component),O=function(e){var t=e.images;return t.length>0&&n.a.createElement("ul",{className:_.imageGallery},t.map((function(e){return n.a.createElement(k,{key:e.id,image:e})})))},S=a(18),w=function(e){var t=e.serviceSearchImages;return n.a.createElement("button",{type:"button",className:S.button,onClick:function(){t()}},"Load more")},x={key:"14890929-23ffdef91aab059ee79f68fac",perPage:12,imageType:"photo",orientation:"horizontal",page:1,query:"",fatchImages:function(){var e=this;return Object(m.a)(i.a.mark((function t(){var a,r,n,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="q=".concat(e.query,"&page=").concat(e.page,"&key=").concat(e.key,"&image_type=").concat(e.imageType,"&orientation=").concat(e.orientation,"&per_page=").concat(e.perPage),t.next=3,fetch("https://pixabay.com/api/?"+a);case 3:return r=t.sent,t.next=6,r.json();case 6:return n=t.sent,t.next=9,n.hits;case 9:return c=t.sent,t.abrupt("return",{hits:c});case 11:case"end":return t.stop()}}),t)})))()},searchQuery:function(e){this.query=e},incrementPage:function(){this.page+=1},resetPage:function(){this.page=1}},C=a(13),F=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(g.a)(t).call(this))).serviceSearchImages=function(){var t=Object(m.a)(i.a.mark((function t(a){var r,n,c,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.setState({isLoading:!0}),!a){t.next=12;break}return x.resetPage(),x.searchQuery(a),t.next=7,x.fatchImages();case 7:r=t.sent,n=r.hits,e.setState({images:Object(l.a)(n)}),t.next=19;break;case 12:return x.incrementPage(),t.next=15,x.fatchImages();case 15:c=t.sent,o=c.hits,s=[].concat(Object(l.a)(e.state.images),Object(l.a)(o)),e.setState({images:Object(l.a)(s)});case 19:e.setState({isLoading:!1}),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),e.setState({error:!0});case 26:case"end":return t.stop()}}),t,null,[[0,23]])})));return function(e){return t.apply(this,arguments)}}(),e.state={images:[],isLoading:!1,error:!1},e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.images,a=e.isLoading,r=e.error;return n.a.createElement("div",{className:C.app},n.a.createElement(v,{serviceSearchImages:this.serviceSearchImages}),r&&n.a.createElement("p",null,"Something terrible happened, but we are already fixing it"),n.a.createElement(O,{images:t}),a&&n.a.createElement(d.a,{className:C.loader,type:"ThreeDots",color:"#3F51B5",height:100,width:100,timeout:3e3}),t.length>0&&n.a.createElement(w,{serviceSearchImages:this.serviceSearchImages}))}}]),t}(r.Component);a(46);o.a.render(n.a.createElement(F,null),document.getElementById("root"))},8:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__3U7cp",searchForm:"Searchbar_searchForm__1TE8h",searchFormButton:"Searchbar_searchFormButton__2gsOg",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__A0Q4h",searchFormInput:"Searchbar_searchFormInput__-0oAw"}}},[[19,1,2]]]);
//# sourceMappingURL=main.4c72f4cd.chunk.js.map